appId: com.veltronik.gimnasio
productName: Gimnasio Veltronik
copyright: Copyright © 2026 Veltronik

# Archivos a incluir en el build
files:
  - "**/*"
  - "!.git/**/*"
  - "!.env"
  - "!.env.*"
  - "!*.md"
  - "!sql/**/*"
  - "!dist/**/*"
  - "!build/**/*"

# Incluir dependencias de producción automáticamente
asar: true
asarUnpack:
  - "node_modules/electron-updater/**/*"
  - "node_modules/electron-log/**/*"

# Archivos extra a copiar
extraResources:
  - from: "assets/"
    to: "assets/"

# Directorio de salida
directories:
  output: dist
  buildResources: build

# Auto-updates via GitHub Releases
publish:
  provider: github
  owner: gustavobenitez0800
  repo: gimnasios-veltronik
  releaseType: release

# ============================================
# WINDOWS
# ============================================
win:
  target:
    - target: nsis
      arch:
        - x64
  # Metadatos profesionales
  publisherName: "Veltronik"
  legalTrademarks: "TM Veltronik"
  verifyUpdateCodeSignature: false # Permitir updates sin firma (por ahora)
  
  # Configuración de Firma Digital (Code Signing)
  # Se usará automáticamente si las variables de entorno CSC_LINK y CSC_KEY_PASSWORD están definidas
  # No es necesario configurarlo aquí explícitamente.

  artifactName: "Gimnasio-Veltronik-${version}-setup.${ext}"

# Configuración del Instalador (Wizard)
nsis:
  oneClick: false  # Falso = Instalador tipo asistente (Next -> Next)
  perMachine: false # true pediría admin siempre, false permite instalar por usuario (mejor para evitar UAC excesivo)
  allowToChangeInstallationDirectory: true
  # installerIcon: assets/VeltronikGym.ico  <-- Requiere convertir el PNG a ICO
  # uninstallerIcon: assets/VeltronikGym.ico <-- Requiere convertir el PNG a ICO
  # installerHeaderIcon: assets/VeltronikGym.ico <-- Requiere convertir el PNG a ICO
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: "Gimnasio Veltronik"
  displayLanguageSelector: true
  license: "LICENSE.md" # Requiere crear este archivo

# ============================================
# MACOS
# ============================================
mac:
  target:
    - target: dmg
      arch:
        - x64
        - arm64
  icon: assets/VeltronikGym.png
  artifactName: "Gimnasio-Veltronik-${version}-${arch}.${ext}"
  category: public.app-category.business

dmg:
  title: Gimnasio Veltronik
  icon: assets/VeltronikGym.png

# ============================================
# LINUX
# ============================================
linux:
  target:
    - target: AppImage
      arch:
        - x64
    - target: deb
      arch:
        - x64
  icon: assets/VeltronikGym.png
  artifactName: "Gimnasio-Veltronik-${version}.${ext}"
  category: Office
  maintainer: veltronikcompany@gmail.com
  vendor: Veltronik

appImage:
  artifactName: "Gimnasio-Veltronik-${version}.AppImage"

deb:
  depends:
    - gconf2
    - gconf-service
    - libnotify4
    - libappindicator1
    - libxtst6
    - libnss3
